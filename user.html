<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.29.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.29.0/mapbox-gl.css' rel='stylesheet' />
    <title>Simple Polylines</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 600px;
        width: 100%;

      }
      .mapboxgl-marker {
        background-image: 'url("https://www.cliparts101.com/files/41/B9390548641D5BD1660AFD0E80367813/Map_Marker.png")'
      }
    </style>
    <script src=  "https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.0.1/mapbox-gl-geocoder.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.0.1/mapbox-gl-geocoder.css' type='text/css' />

  </head>
  <body>

    <div id="map"></div>
    <br>
    <div id="myPlaces">
    <h3><b>Your Places</b></h3>
    Home (8 River Terrace) <input class='yourPlaces' id="40.7159029,-74.0164775" type="checkbox"/>
    Groceries (270 Greenwich Street) <input id="40.7155236,-74.0114554" class='yourPlaces' type="checkbox"/>
  </div>
    <br>
    Add new location to your favorites: <input id="placeName" placeholder="Place Name"><input placeholder="Address or Zipcode" id="address">
    <button id="addPlace">Add to faves</button>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibWFyaW8yMzU3IiwiYSI6ImNpdjRnbDl1bzAwaW0yenRqbmxrYTBic2UifQ.tU2ENlJUDkdYp8kOJBtPzw';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [-74, 40.75],
    zoom: 13
});

map.addControl(new MapboxGeocoder({
    accessToken: mapboxgl.accessToken

}));
      /*var marker = new mapboxgl.Marker({
        options: new mapboxgl.LngLat(-73.9867,40.75)
      })*/
      console.log(map)
      var marker = new mapboxgl.Marker()
        marker.setLngLat([-74, 40.75])
        marker.addTo(map);




$(".mapboxgl-marker").append("<img height='6' width='6' src='http://www.clipartkid.com/images/282/red-glossy-dot-clip-art-at-clker-com-vector-clip-art-online-royalty-Gefbyd-clipart.png'/>")
$("#addPlace").click(function(){
  let address=$("#address").val()
  let place=$("#placeName").val()
  console.log(place)

  let url="https://maps.googleapis.com/maps/api/geocmypmode/json?address="+address+"&key=AIzaSyCgvMvFwad7QwQI3wlFjN-lld69R5mfwxw"
  console.log(url)
  console.l
  $.ajax({
    url: url,
    success: function(data){
      console.log(data)
      console.log(data.results[0].geometry)
      $("#myPlaces").append(place+"<input class='yourPlaces' id='"+data.results[0].geometry.location.lat+","+data.results[0].geometry.location.lng+"' type='checkbox'>")
    },
    error: function(err){
      alert("Either that place doesn't exist or google is down. Take your pick. #Savage")
    }
  })
})
    </script>

  </body>
</html>
